(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const c of e)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function u(e){const c={};return e.integrity&&(c.integrity=e.integrity),e.referrerPolicy&&(c.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?c.credentials="include":e.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(e){if(e.ep)return;e.ep=!0;const c=u(e);fetch(e.href,c)}})();(()=>{const n=(o,d)=>o.querySelector?o.querySelector(d):null,s=document.querySelector("[data-code-form]");if(!s)return;const u=n("[data-code-form]","[data-verify-form]")||s.querySelector("[data-verify-form]"),l=n("[data-code-form]","[data-voucher-code]")||s.querySelector("[data-voucher-code]"),e=n("[data-code-form]","[data-submit]")||s.querySelector("[data-submit]"),c=s.querySelector("[data-recaptcha]"),i=s.querySelector("[data-verify-result]"),m=document.querySelector("[data-pin-card]"),h=m?.querySelector("[data-pin-form]"),v=m?.querySelector("[data-pin-input]"),f=m?.querySelector("[data-pin-submit]"),g=parseInt(v?.dataset.pinLength||"5",10),t=h?.dataset.redirect||"/detail-voucher.html",a=o=>{u&&(u.dataset.recaptcha=o?"done":"pending")},r=()=>{if(!e)return;const o=(l?.value?.trim().length||0)>0,d=u?.dataset.recaptcha==="done",p=o&&d;e.disabled=!p,e.classList.toggle("is-enabled",p),e.classList.toggle("cursor-not-allowed",!p)};window.onRecaptchaSuccess=()=>{a(!0),r()},a(!1),r(),l?.addEventListener("input",r),u?.addEventListener("submit",o=>{o.preventDefault(),!e?.disabled&&(i?.classList.remove("hidden"),e?.classList.add("hidden"),c?.classList.add("hidden"),i?.addEventListener("click",d=>{const p=d.target.closest("[data-btn-show-detail],[data-btn-check-another]");if(p&&(d.preventDefault(),p.hasAttribute("data-btn-show-detail")&&(s?.classList.add("hidden"),m?.classList.remove("hidden"),v&&(v.value="",v.focus()),f&&(f.disabled=!0,f.classList.remove("is-enabled"),f.classList.add("cursor-not-allowed"))),p.hasAttribute("data-btn-check-another"))){i?.classList.add("hidden"),l&&(l.value=""),a(!1);try{window.grecaptcha&&window.grecaptcha.reset()}catch{}r(),l?.focus(),e?.classList.remove("hidden"),c?.classList.remove("hidden"),m?.classList.add("hidden"),s?.classList.remove("hidden")}},{once:!0}))}),v?.addEventListener("input",()=>{if(!f)return;const d=(v.value||"").trim().length===g;f.disabled=!d,f.classList.toggle("is-enabled",d),f.classList.toggle("cursor-not-allowed",!d)}),h?.addEventListener("submit",o=>{o.preventDefault(),!f?.disabled&&(window.location.href=t)})})();(()=>{if(!document.querySelector("[data-summary]"))return;const n=(t,a=document)=>a.querySelector(t),s=(t,a=document)=>Array.from(a.querySelectorAll(t)),u=(t,a=0)=>Number.isFinite(+t)?+t:a,l=t=>`${t.toLocaleString("cs-CZ")} Kč`,e=t=>{const a=u(t.dataset.counterMax,0),r=n(t.dataset.counterTarget);if(!r)return;const o=t.value.length;r.textContent=a?`${o}/${a} znaků`:`${o}`};s("[data-counter-input]").forEach(t=>{e(t),t.addEventListener("input",()=>e(t))});const c=(t,a)=>{t&&(t.hidden=a)},i=(t,a)=>{const r=n(t);r&&(r.classList.toggle("hidden",!a),c(r,!a))};document.addEventListener("click",t=>{const a=t.target.closest("[data-action][data-target]");if(a){t.preventDefault();const o=a.dataset.target;if(!o)return;if(a.dataset.action==="show"){i(o,!0);const d=document.querySelector(`[data-action="hide"][data-target="${o}"]`);a.classList.add("hidden"),d?.classList.remove("hidden")}if(a.dataset.action==="hide"){i(o,!1);const d=document.querySelector(`[data-action="show"][data-target="${o}"]`);a.classList.add("hidden"),d?.classList.remove("hidden")}}const r=t.target.closest("[data-toggle][data-target]");if(r){const o=n(r.dataset.target);if(!o)return;const d=r.getAttribute("aria-expanded")==="true";r.setAttribute("aria-expanded",(!d).toString()),o.classList.toggle("hidden",d),c(o,d),r.dataset.textOn&&r.dataset.textOff&&(r.textContent=d?r.dataset.textOff:r.dataset.textOn)}}),s("[data-select]").forEach(t=>{const a=n("[data-select-trigger]",t),r=n("[data-select-value]",t),o=n("[data-select-label]",t),d=s("[data-select-option]",t),p=y=>{t.dataset.open=y?"true":"false",a?.setAttribute("aria-expanded",y?"true":"false")};a?.addEventListener("click",()=>{const y=t.dataset.open==="true";p(!y)}),d.forEach(y=>{y.addEventListener("click",()=>{d.forEach(L=>L.classList.remove("is-selected")),y.classList.add("is-selected"),o&&(o.textContent=y.textContent.trim()),r&&(r.value=y.dataset.value||""),p(!1)})}),document.addEventListener("click",y=>{t.contains(y.target)||p(!1)})});const m=n("[data-recipient-block]"),h=()=>{console.log("renderRecipient");const t=n('input[name="send_to"]:checked');!m||!t||c(m,t.value!=="recipient")};s('input[name="send_to"][data-sendto]').forEach(t=>t.addEventListener("change",h)),h();const v=()=>{const t=n('input[name="pack"]:checked')?.value;s('input[name="delivery"][data-delivery]').forEach(a=>a.checked=!1),s("[data-ppl-text]").forEach(a=>{const r=a.dataset.pplText;r==="ppl-luxury"?a.textContent="Vyberte si PPL s poistením a prioritným spracovaním.":r==="ppl-plastic"?a.textContent="Vyberte si místo doručení do PPL boxu":a.textContent="Vyberte si PPL výdejné miesto.",a.style.color=""}),s("[data-ppl-id]").forEach(a=>a.value=""),s("[data-delivery-form]").forEach(a=>{const o=a.dataset.visibleForPack===t;a.classList.toggle("hidden",!o),c(a,!o)}),s("[data-visible-for-pack]").forEach(a=>{const o=a.dataset.visibleForPack===t;a.classList.toggle("hidden",!o),c(a,!o)})};s('input[name="pack"][data-pack]').forEach(t=>t.addEventListener("change",v)),v();const f=(t,a=1)=>Math.max(a,u(t,a)),g=()=>{const t=n("[data-summary]")||document,a=u(t.dataset.unitPrice)||u(n("[data-qty-root]")?.dataset.unitPrice)||0,r=n("[data-qty-input]"),o=u(r?.dataset.qtyMin,1),d=f(r?.value,o);r&&(r.value=d);const p=n('input[name="pack"]:checked'),y=p?.value||"e-voucher",L=u(p?.dataset.packPrice,0),E=y==="luxury",M=y==="plastic-card",P=n('input[name="delivery"]:checked'),q=P?u(P.dataset.deliveryPrice,0):0,S=a*d,C=n("[data-summary-unit-price]",t);C&&(C.textContent=l(S));const $=n("[data-summary-qty-display]",t);$&&($.textContent=d);const k=n("[data-summary-pack-row]",t),A=n("[data-summary-pack-label]",t),I=n("[data-summary-pack-price]",t);if(k){const w=E&&L>0;k.hidden=!w,k.classList.toggle("hidden",!w),w&&(A&&(A.textContent="Dárkové luxusní balení"),I&&(I.textContent=l(L)))}const x=n("[data-summary-delivery-row]",t),O=n("[data-summary-delivery-price]",t),b=!!P&&(M||E);x&&(x.hidden=!b,x.classList.toggle("hidden",!b),b&&O&&(O.textContent=l(q)));const D=S+(b?q:0)+(E?L:0),R=n("[data-summary-total]",t);R&&(R.textContent=l(D));const B=n("[data-pay-btn]");B&&(B.textContent=`Zaplatit ${l(D)}`)};document.addEventListener("click",t=>{const a=t.target.closest('[data-action="qty-dec"]'),r=t.target.closest('[data-action="qty-inc"]');if(!a&&!r)return;const o=n("[data-qty-input]");if(!o)return;const d=u(o.dataset.qtyMin,1),p=f(o.value,d);o.value=a?Math.max(d,p-1):p+1,g()}),n("[data-qty-input]")?.addEventListener("input",g),s('input[name="pack"][data-pack]').forEach(t=>t.addEventListener("change",()=>{v(),g()})),s('input[name="delivery"][data-delivery]').forEach(t=>t.addEventListener("change",a=>{const r=a.target.value;if(r!=="ppl"&&r!=="luxury"){const o=n('input[name="pack"]:checked')?.value;let d=null;if(o==="plastic-card"?d="ppl-plastic":o==="luxury"&&(d="ppl-luxury"),d){const p=n(`[data-ppl-text="${d}"]`),y=n(`[data-ppl-id="${d}"]`);p&&(d==="ppl-luxury"?p.textContent="Vyberte si PPL s poistením a prioritným spracovaním.":d==="ppl-plastic"&&(p.textContent="Vyberte si místo doručení do PPL boxu"),p.style.color=""),y&&(y.value="")}}g()}));try{s('input[type="radio"][name="payment"][data-payment]').forEach(t=>t.checked=!1),s('input[type="radio"][name="design"][data-design]').forEach(t=>t.checked=!1)}catch{}g()})();(()=>{if(!document.querySelector("[data-modal]"))return;const n=(e,c=document)=>c.querySelector(e),s=(e,c=document)=>Array.from(c.querySelectorAll(e)),u=e=>{e&&(e.classList.remove("hidden"),e.setAttribute("aria-hidden","false"),document.documentElement.style.overflow="hidden")},l=e=>{e&&(e.classList.add("hidden"),e.setAttribute("aria-hidden","true"),document.documentElement.style.removeProperty("overflow"),document.body.style.removeProperty("overflow"))};document.addEventListener("click",e=>{const c=e.target.closest("[data-modal-open][data-modal-target]");if(c){e.preventDefault();const v=c.getAttribute("data-modal-target"),f=n(v);u(f);return}const i=e.target.closest("[data-modal-close]");if(i){const v=i.closest("[data-modal]");l(v);return}const m=e.target.closest("[data-modal-overlay]");if(m){l(m.closest("[data-modal]"));return}const h=e.target.closest("[data-modal]");if(h&&!e.target.closest("[data-modal-content]")){l(h);return}}),document.addEventListener("keydown",e=>{e.key==="Escape"&&s("[data-modal]").forEach(c=>{c.classList.contains("hidden")||l(c)})})})();(()=>{const n=document.getElementById("ppl-parcelshop-map-modal");if(!n)return;let s=null;function u(){n&&(n.classList.add("hidden"),n.setAttribute("aria-hidden","true"),document.body.style.removeProperty("overflow"),document.documentElement.style.removeProperty("overflow"),document.body.offsetHeight)}document.querySelectorAll("[data-delivery-option-id]").forEach(c=>{c.addEventListener("click",i=>{if(s=c.getAttribute("data-delivery-option-id"),c.getAttribute("data-modal-target")&&n){const h=c.querySelector('input[type="radio"]');h&&(h.checked=!0,h.dispatchEvent(new Event("change",{bubbles:!0}))),n.classList.remove("hidden"),n.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.PPL&&window.PPL.map&&typeof window.PPL.map.resize=="function"&&setTimeout(()=>{window.PPL.map.resize()},50)}})});const l=document.querySelector("[data-modal-close]"),e=document.querySelector(".sv-modal-overlay");l&&l.addEventListener("click",u),e&&e.addEventListener("click",u),document.addEventListener("ppl-parcelshop-map",c=>{const i=c.detail;if(!s||!i){console.error("Chyba: Dáta z PPL widgetu sú neúplné.");return}const m=document.querySelector(`[data-ppl-text="${s}"]`),h=document.querySelector(`[data-ppl-id="${s}"]`),v=document.querySelector(`[data-delivery-option-id="${s}"]`),f=v?v.querySelector('input[type="radio"][name="delivery"]'):null;if(h&&m&&f){const g=i.id||i.code;h.value=g;const t=i.zip||i.zipCode||i.postalCode||"",a=`${i.street}, ${t}, ${i.city}`;m.textContent=`Vybrané miesto: ${i.name} (${a})`,m.style.color="var(--brand)",f.checked=!0,f.dispatchEvent(new Event("change",{bubbles:!0})),u()}else console.error(`Chyba: Nenašli sa všetky cieľové prvky pre možnosť ${s}.`);s=null})})();(()=>{const n=document.querySelector("[data-lang-selector]");if(!n)return;const s=n.querySelector("[data-lang-trigger]");n.querySelector("[data-lang-dropdown]");const u=n.querySelector("[data-lang-current]"),l=n.querySelectorAll(".lang-selector-option");s.addEventListener("click",e=>{e.stopPropagation(),n.classList.toggle("is-open")}),l.forEach(e=>{e.addEventListener("click",c=>{c.stopPropagation();const i=e.dataset.lang,m=e.textContent;l.forEach(h=>h.classList.remove("active")),e.classList.add("active"),u.textContent=m,n.classList.remove("is-open"),console.log("Selected language:",i)})}),document.addEventListener("click",e=>{n.contains(e.target)||n.classList.remove("is-open")})})();
