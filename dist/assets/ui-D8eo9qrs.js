(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function u(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(e){if(e.ep)return;e.ep=!0;const n=u(e);fetch(e.href,n)}})();(()=>{const a=(p,i)=>p.querySelector?p.querySelector(i):null,s=document.querySelector("[data-code-form]");if(!s)return;const u=a("[data-code-form]","[data-verify-form]")||s.querySelector("[data-verify-form]"),c=a("[data-code-form]","[data-voucher-code]")||s.querySelector("[data-voucher-code]"),e=a("[data-code-form]","[data-submit]")||s.querySelector("[data-submit]"),n=s.querySelector("[data-recaptcha]"),r=s.querySelector("[data-verify-result]"),d=document.querySelector("[data-pin-card]"),h=d?.querySelector("[data-pin-form]"),y=d?.querySelector("[data-pin-input]"),t=d?.querySelector("[data-pin-submit]"),o=parseInt(y?.dataset.pinLength||"5",10),m=h?.dataset.redirect||"/detail-voucher.html",l=p=>{u&&(u.dataset.recaptcha=p?"done":"pending")},f=()=>{if(!e)return;const p=(c?.value?.trim().length||0)>0,i=u?.dataset.recaptcha==="done",v=p&&i;e.disabled=!v,e.classList.toggle("is-enabled",v),e.classList.toggle("cursor-not-allowed",!v)};window.onRecaptchaSuccess=()=>{l(!0),f()},l(!1),f(),c?.addEventListener("input",f),u?.addEventListener("submit",p=>{p.preventDefault(),!e?.disabled&&(r?.classList.remove("hidden"),e?.classList.add("hidden"),n?.classList.add("hidden"),r?.addEventListener("click",i=>{const v=i.target.closest("[data-btn-show-detail],[data-btn-check-another]");if(v&&(i.preventDefault(),v.hasAttribute("data-btn-show-detail")&&(s?.classList.add("hidden"),d?.classList.remove("hidden"),y&&(y.value="",y.focus()),t&&(t.disabled=!0,t.classList.remove("is-enabled"),t.classList.add("cursor-not-allowed"))),v.hasAttribute("data-btn-check-another"))){r?.classList.add("hidden"),c&&(c.value=""),l(!1);try{window.grecaptcha&&window.grecaptcha.reset()}catch{}f(),c?.focus(),e?.classList.remove("hidden"),n?.classList.remove("hidden"),d?.classList.add("hidden"),s?.classList.remove("hidden")}},{once:!0}))}),y?.addEventListener("input",()=>{if(!t)return;const i=(y.value||"").trim().length===o;t.disabled=!i,t.classList.toggle("is-enabled",i),t.classList.toggle("cursor-not-allowed",!i)}),h?.addEventListener("submit",p=>{p.preventDefault(),!t?.disabled&&(window.location.href=m)})})();(()=>{const a=(c,e=document)=>e.querySelector(c),s=(c,e)=>{c&&(c.hidden=e)},u=(c,e)=>{const n=a(c);n&&(n.classList.toggle("hidden",!e),s(n,!e))};document.addEventListener("click",c=>{const e=c.target.closest("[data-action][data-target]");if(e){c.preventDefault();const r=e.dataset.target;if(!r)return;if(e.dataset.action==="show"){u(r,!0);const d=document.querySelector(`[data-action="hide"][data-target="${r}"]`);e.classList.add("hidden"),d?.classList.remove("hidden")}if(e.dataset.action==="hide"){u(r,!1);const d=document.querySelector(`[data-action="show"][data-target="${r}"]`);e.classList.add("hidden"),d?.classList.remove("hidden")}}const n=c.target.closest("[data-toggle][data-target]");if(n){const r=a(n.dataset.target);if(!r)return;const d=n.getAttribute("aria-expanded")==="true";n.setAttribute("aria-expanded",(!d).toString()),r.classList.toggle("hidden",d),s(r,d),n.dataset.textOn&&n.dataset.textOff&&(n.textContent=d?n.dataset.textOff:n.dataset.textOn)}})})();(()=>{if(!document.querySelector("[data-summary]"))return;const a=(t,o=document)=>o.querySelector(t),s=(t,o=document)=>Array.from(o.querySelectorAll(t)),u=(t,o=0)=>Number.isFinite(+t)?+t:o,c=t=>`${t.toLocaleString("cs-CZ")} Kč`,e=t=>{const o=u(t.dataset.counterMax,0),m=a(t.dataset.counterTarget);if(!m)return;const l=t.value.length;m.textContent=o?`${l}/${o} znaků`:`${l}`};s("[data-counter-input]").forEach(t=>{e(t),t.addEventListener("input",()=>e(t))}),s("[data-select]").forEach(t=>{const o=a("[data-select-trigger]",t),m=a("[data-select-value]",t),l=a("[data-select-label]",t),f=s("[data-select-option]",t),p=i=>{t.dataset.open=i?"true":"false",o?.setAttribute("aria-expanded",i?"true":"false")};o?.addEventListener("click",()=>{const i=t.dataset.open==="true";p(!i)}),f.forEach(i=>{i.addEventListener("click",()=>{f.forEach(v=>v.classList.remove("is-selected")),i.classList.add("is-selected"),l&&(l.textContent=i.textContent.trim()),m&&(m.value=i.dataset.value||""),p(!1)})}),document.addEventListener("click",i=>{t.contains(i.target)||p(!1)})});const n=a("[data-recipient-block]"),r=()=>{console.log("renderRecipient");const t=a('input[name="send_to"]:checked');!n||!t||setHidden(n,t.value!=="recipient")};s('input[name="send_to"][data-sendto]').forEach(t=>t.addEventListener("change",r)),r();const d=()=>{const t=a('input[name="pack"]:checked')?.value;s('input[name="delivery"][data-delivery]').forEach(o=>o.checked=!1),s("[data-ppl-text]").forEach(o=>{const m=o.dataset.pplText;m==="ppl-luxury"?o.textContent="Vyberte si PPL s poistením a prioritným spracovaním.":m==="ppl-plastic"?o.textContent="Vyberte si místo doručení do PPL boxu":o.textContent="Vyberte si PPL výdejné miesto.",o.style.color=""}),s("[data-ppl-id]").forEach(o=>o.value=""),s("[data-delivery-form]").forEach(o=>{const l=o.dataset.visibleForPack===t;o.classList.toggle("hidden",!l),setHidden(o,!l)}),s("[data-visible-for-pack]").forEach(o=>{const l=o.dataset.visibleForPack===t;o.classList.toggle("hidden",!l),setHidden(o,!l)})};s('input[name="pack"][data-pack]').forEach(t=>t.addEventListener("change",d)),d();const h=(t,o=1)=>Math.max(o,u(t,o)),y=()=>{const t=a("[data-summary]")||document,o=u(t.dataset.unitPrice)||u(a("[data-qty-root]")?.dataset.unitPrice)||0,m=a("[data-qty-input]"),l=u(m?.dataset.qtyMin,1),f=h(m?.value,l);m&&(m.value=f);const p=a('input[name="pack"]:checked'),i=p?.value||"e-voucher",v=u(p?.dataset.packPrice,0),g=i==="luxury",R=i==="plastic-card",b=a('input[name="delivery"]:checked'),x=b?u(b.dataset.deliveryPrice,0):0,q=o*f,w=a("[data-summary-unit-price]",t);w&&(w.textContent=c(q));const S=a("[data-summary-qty-display]",t);S&&(S.textContent=f);const E=a("[data-summary-pack-row]",t),C=a("[data-summary-pack-label]",t),$=a("[data-summary-pack-price]",t);if(E){const k=g&&v>0;E.hidden=!k,E.classList.toggle("hidden",!k),k&&(C&&(C.textContent="Dárkové luxusní balení"),$&&($.textContent=c(v)))}const P=a("[data-summary-delivery-row]",t),A=a("[data-summary-delivery-price]",t),L=!!b&&(R||g);P&&(P.hidden=!L,P.classList.toggle("hidden",!L),L&&A&&(A.textContent=c(x)));const I=q+(L?x:0)+(g?v:0),O=a("[data-summary-total]",t);O&&(O.textContent=c(I));const D=a("[data-pay-btn]");D&&(D.textContent=`Zaplatit ${c(I)}`)};document.addEventListener("click",t=>{const o=t.target.closest('[data-action="qty-dec"]'),m=t.target.closest('[data-action="qty-inc"]');if(!o&&!m)return;const l=a("[data-qty-input]");if(!l)return;const f=u(l.dataset.qtyMin,1),p=h(l.value,f);l.value=o?Math.max(f,p-1):p+1,y()}),a("[data-qty-input]")?.addEventListener("input",y),s('input[name="pack"][data-pack]').forEach(t=>t.addEventListener("change",()=>{d(),y()})),s('input[name="delivery"][data-delivery]').forEach(t=>t.addEventListener("change",o=>{const m=o.target.value;if(m!=="ppl"&&m!=="luxury"){const l=a('input[name="pack"]:checked')?.value;let f=null;if(l==="plastic-card"?f="ppl-plastic":l==="luxury"&&(f="ppl-luxury"),f){const p=a(`[data-ppl-text="${f}"]`),i=a(`[data-ppl-id="${f}"]`);p&&(f==="ppl-luxury"?p.textContent="Vyberte si PPL s poistením a prioritným spracovaním.":f==="ppl-plastic"&&(p.textContent="Vyberte si místo doručení do PPL boxu"),p.style.color=""),i&&(i.value="")}}y()}));try{s('input[type="radio"][name="payment"][data-payment]').forEach(t=>t.checked=!1),s('input[type="radio"][name="design"][data-design]').forEach(t=>t.checked=!1)}catch{}y()})();(()=>{if(!document.querySelector("[data-modal]"))return;const a=(e,n=document)=>n.querySelector(e),s=(e,n=document)=>Array.from(n.querySelectorAll(e)),u=e=>{e&&(e.classList.remove("hidden"),e.setAttribute("aria-hidden","false"),document.documentElement.style.overflow="hidden")},c=e=>{e&&(e.classList.add("hidden"),e.setAttribute("aria-hidden","true"),document.documentElement.style.removeProperty("overflow"),document.body.style.removeProperty("overflow"))};document.addEventListener("click",e=>{const n=e.target.closest("[data-modal-open][data-modal-target]");if(n){e.preventDefault();const y=n.getAttribute("data-modal-target"),t=a(y);u(t);return}const r=e.target.closest("[data-modal-close]");if(r){const y=r.closest("[data-modal]");c(y);return}const d=e.target.closest("[data-modal-overlay]");if(d){c(d.closest("[data-modal]"));return}const h=e.target.closest("[data-modal]");if(h&&!e.target.closest("[data-modal-content]")){c(h);return}}),document.addEventListener("keydown",e=>{e.key==="Escape"&&s("[data-modal]").forEach(n=>{n.classList.contains("hidden")||c(n)})})})();(()=>{const a=document.getElementById("ppl-parcelshop-map-modal");if(!a)return;let s=null;function u(){a&&(a.classList.add("hidden"),a.setAttribute("aria-hidden","true"),document.body.style.removeProperty("overflow"),document.documentElement.style.removeProperty("overflow"),document.body.offsetHeight)}document.querySelectorAll("[data-delivery-option-id]").forEach(n=>{n.addEventListener("click",r=>{if(s=n.getAttribute("data-delivery-option-id"),n.getAttribute("data-modal-target")&&a){const h=n.querySelector('input[type="radio"]');h&&(h.checked=!0,h.dispatchEvent(new Event("change",{bubbles:!0}))),a.classList.remove("hidden"),a.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",window.PPL&&window.PPL.map&&typeof window.PPL.map.resize=="function"&&setTimeout(()=>{window.PPL.map.resize()},50)}})});const c=document.querySelector("[data-modal-close]"),e=document.querySelector(".sv-modal-overlay");c&&c.addEventListener("click",u),e&&e.addEventListener("click",u),document.addEventListener("ppl-parcelshop-map",n=>{const r=n.detail;if(!s||!r){console.error("Chyba: Dáta z PPL widgetu sú neúplné.");return}const d=document.querySelector(`[data-ppl-text="${s}"]`),h=document.querySelector(`[data-ppl-id="${s}"]`),y=document.querySelector(`[data-delivery-option-id="${s}"]`),t=y?y.querySelector('input[type="radio"][name="delivery"]'):null;if(h&&d&&t){const o=r.id||r.code;h.value=o;const m=r.zip||r.zipCode||r.postalCode||"",l=`${r.street}, ${m}, ${r.city}`;d.textContent=`Vybrané miesto: ${r.name} (${l})`,d.style.color="var(--brand)",t.checked=!0,t.dispatchEvent(new Event("change",{bubbles:!0})),u()}else console.error(`Chyba: Nenašli sa všetky cieľové prvky pre možnosť ${s}.`);s=null})})();(()=>{const a=document.querySelector("[data-lang-selector]");if(!a)return;const s=a.querySelector("[data-lang-trigger]");a.querySelector("[data-lang-dropdown]");const u=a.querySelector("[data-lang-current]"),c=a.querySelectorAll(".lang-selector-option");s.addEventListener("click",e=>{e.stopPropagation(),a.classList.toggle("is-open")}),c.forEach(e=>{e.addEventListener("click",n=>{n.stopPropagation();const r=e.dataset.lang,d=e.textContent;c.forEach(h=>h.classList.remove("active")),e.classList.add("active"),u.textContent=d,a.classList.remove("is-open"),console.log("Selected language:",r)})}),document.addEventListener("click",e=>{a.contains(e.target)||a.classList.remove("is-open")})})();
